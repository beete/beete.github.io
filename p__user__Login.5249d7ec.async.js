(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(V){V.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-","subbtn-hide":"subbtn-hide___1QDOa","subbtn-show":"subbtn-show___1UKpz",icon:"icon___rzGKO"}},32384:function(){},33508:function(){},29009:function(V,R,r){"use strict";r.r(R),r.d(R,{default:function(){return Ue}});var W=r(18106),S=r(63885),K=r(34792),N=r(48086),y=r(39428),O=r(11849),w=r(3182),_=r(57337),Ve=r(17462),ue=r(76772),s=r(28991),v=r(67294),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},de=ce,ee=r(27029),re=function(t,a){return v.createElement(ee.Z,(0,s.Z)((0,s.Z)({},t),{},{ref:a,icon:de}))};re.displayName="LockOutlined";var ne=v.forwardRef(re),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},fe=ve,te=function(t,a){return v.createElement(ee.Z,(0,s.Z)((0,s.Z)({},t),{},{ref:a,icon:fe}))};te.displayName="MobileOutlined";var me=v.forwardRef(te),he=r(89366),We=r(84305),pe=r(39559),D=r(81253),e=r(85893),ge=r(31490),Ze=r(5894),$e=r(32384),xe=["logo","message","contentStyle","title","subTitle","actions","children"];function Pe(n){var t,a=n.logo,f=n.message,c=n.contentStyle,T=n.title,b=n.subTitle,P=n.actions,I=n.children,d=(0,D.Z)(n,xe),j=(0,ge.YB)(),G=d.submitter===!1?!1:(0,s.Z)((0,s.Z)({searchConfig:{submitText:j.getMessage("loginForm.submitText","\u767B\u5F55")}},d.submitter),{},{submitButtonProps:(0,s.Z)({size:"large",style:{width:"100%"}},(t=d.submitter)===null||t===void 0?void 0:t.submitButtonProps),render:function(m,i){var o,h=i.pop();if(typeof(d==null||(o=d.submitter)===null||o===void 0?void 0:o.render)=="function"){var p,l;return d==null||(p=d.submitter)===null||p===void 0||(l=p.render)===null||l===void 0?void 0:l.call(p,m,i)}return h}}),z=(0,v.useContext)(pe.ZP.ConfigContext),A=z.getPrefixCls("pro-form-login"),g=function(m){return"".concat(A,"-").concat(m)},B=(0,v.useMemo)(function(){return a?typeof a=="string"?(0,e.jsx)("img",{src:a}):a:null},[a]);return(0,e.jsxs)("div",{className:g("container"),children:[(0,e.jsxs)("div",{className:g("top"),children:[T||B?(0,e.jsxs)("div",{className:g("header"),children:[B?(0,e.jsx)("span",{className:g("logo"),children:B}):null,T?(0,e.jsx)("span",{className:g("title"),children:T}):null]}):null,b?(0,e.jsx)("div",{className:g("desc"),children:b}):null]}),(0,e.jsxs)("div",{className:g("main"),style:(0,s.Z)({width:328},c),children:[(0,e.jsxs)(Ze.A,(0,s.Z)((0,s.Z)({isKeyPressSubmit:!0},d),{},{submitter:G,children:[f,I]})),P?(0,e.jsx)("div",{className:g("other"),children:P}):null]})]})}var $=r(69787),ye=["fieldProps","proFieldProps"],je=["fieldProps","proFieldProps"],Y="text",be=function(t){var a=t.fieldProps,f=t.proFieldProps,c=(0,D.Z)(t,ye);return(0,e.jsx)($.Z,(0,s.Z)({valueType:Y,fieldProps:a,filedConfig:{valueType:Y},proFieldProps:f},c))},Fe=function(t){var a=t.fieldProps,f=t.proFieldProps,c=(0,D.Z)(t,je);return(0,e.jsx)($.Z,(0,s.Z)({valueType:"password",fieldProps:a,proFieldProps:f,filedConfig:{valueType:Y}},c))},Q=be;Q.Password=Fe,Q.displayName="ProFormComponent";var J=Q,He=r(57663),Ce=r(71577),Ke=r(47673),Te=r(4107),H=r(55507),ae=r(92137),X=r(28481),Ye=r(9715),Se=r(903),se=r(64893),Le=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],Me=v.forwardRef(function(n,t){var a=Se.Z.useFormInstance(),f=(0,v.useState)(n.countDown||60),c=(0,X.Z)(f,2),T=c[0],b=c[1],P=(0,v.useState)(!1),I=(0,X.Z)(P,2),d=I[0],j=I[1],G=(0,v.useState)(),z=(0,X.Z)(G,2),A=z[0],g=z[1],B=n.rules,U=n.name,m=n.phoneName,i=n.fieldProps,o=n.captchaTextRender,h=o===void 0?function(Z,F){return Z?"".concat(F," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:o,p=n.captchaProps,l=(0,D.Z)(n,Le),E=function(){var Z=(0,ae.Z)((0,H.Z)().mark(function F(M){return(0,H.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,g(!0),C.next=4,l.onGetCaptcha(M);case 4:g(!1),j(!0),C.next=13;break;case 8:C.prev=8,C.t0=C.catch(0),j(!1),g(!1),console.log(C.t0);case 13:case"end":return C.stop()}},F,null,[[0,8]])}));return function(M){return Z.apply(this,arguments)}}();return(0,v.useImperativeHandle)(t,function(){return{startTiming:function(){return j(!0)},endTiming:function(){return j(!1)}}}),(0,v.useEffect)(function(){var Z=0,F=n.countDown;return d&&(Z=window.setInterval(function(){b(function(M){return M<=1?(j(!1),clearInterval(Z),F||60):M-1})},1e3)),function(){return clearInterval(Z)}},[d]),(0,e.jsxs)("div",{style:(0,s.Z)((0,s.Z)({},i==null?void 0:i.style),{},{display:"flex",alignItems:"center"}),ref:t,children:[(0,e.jsx)(Te.Z,(0,s.Z)((0,s.Z)({},i),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,e.jsx)(Ce.Z,(0,s.Z)((0,s.Z)({style:{display:"block"},disabled:d,loading:A},p),{},{onClick:function(){var Z=(0,ae.Z)((0,H.Z)().mark(function M(){var u;return(0,H.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(x.prev=0,!m){x.next=9;break}return x.next=4,a.validateFields([m].flat(1));case 4:return u=a.getFieldValue([m].flat(1)),x.next=7,E(u);case 7:x.next=11;break;case 9:return x.next=11,E("");case 11:x.next=16;break;case 13:x.prev=13,x.t0=x.catch(0),console.log(x.t0);case 16:case"end":return x.stop()}},M,null,[[0,13]])}));function F(){return Z.apply(this,arguments)}return F}(),children:h(d,T)}))]})}),Ne=(0,se.G)(Me),Be=Ne,Qe=r(63185),Ee=r(9676),le=r(22270),Oe=["options","fieldProps","proFieldProps","valueEnum"],Ie=v.forwardRef(function(n,t){var a=n.options,f=n.fieldProps,c=n.proFieldProps,T=n.valueEnum,b=(0,D.Z)(n,Oe);return(0,e.jsx)($.Z,(0,s.Z)({ref:t,valueType:"checkbox",valueEnum:(0,le.h)(T,void 0),fieldProps:(0,s.Z)({options:a},f),lightProps:(0,s.Z)({labelFormatter:function(){return(0,e.jsx)($.Z,(0,s.Z)({ref:t,valueType:"checkbox",mode:"read",valueEnum:(0,le.h)(T,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:a},f),proFieldProps:c},b))}},b.lightProps),proFieldProps:c},b))}),ze=v.forwardRef(function(n,t){var a=n.fieldProps,f=n.children;return(0,e.jsx)(Ee.Z,(0,s.Z)((0,s.Z)({ref:t},a),{},{children:f}))}),Re=(0,se.G)(ze,{valuePropName:"checked"}),ie=Re;ie.Group=Ie;var we=ie,k=r(81910),De=r(36571);function ke(n,t){return q.apply(this,arguments)}function q(){return q=(0,w.Z)((0,y.Z)().mark(function n(t,a){return(0,y.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,k.WY)("/api/login/captcha",(0,O.Z)({method:"GET",params:(0,O.Z)({},t)},a||{})));case 1:case"end":return c.stop()}},n)})),q.apply(this,arguments)}var Ge=r(34687),L=r.n(Ge),oe=function(t){var a=t.content;return(0,e.jsx)(ue.Z,{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},Ae=function(){var t=(0,v.useState)({}),a=(0,_.Z)(t,2),f=a[0],c=a[1],T=(0,v.useState)("account"),b=(0,_.Z)(T,2),P=b[0],I=b[1],d=(0,k.tT)("@@initialState"),j=d.initialState,G=d.setInitialState,z=function(){var m=(0,w.Z)((0,y.Z)().mark(function i(){var o,h;return(0,y.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,j==null||(o=j.fetchUserInfo)===null||o===void 0?void 0:o.call(j);case 2:if(h=l.sent,!h){l.next=6;break}return l.next=6,G(function(E){return(0,O.Z)((0,O.Z)({},E),{},{currentUser:h})});case 6:case"end":return l.stop()}},i)}));return function(){return m.apply(this,arguments)}}(),A=function(){var m=(0,w.Z)((0,y.Z)().mark(function i(o){var h,p,l,E,Z,F;return(0,y.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,De.x4)((0,O.Z)((0,O.Z)({},o),{},{type:P}));case 3:if(h=u.sent,h.status!=="ok"){u.next=15;break}return p="\u767B\u5F55\u6210\u529F\uFF01",N.ZP.success(p),u.next=9,z();case 9:if(k.m8){u.next=11;break}return u.abrupt("return");case 11:return l=k.m8.location.query,E=l,Z=E.redirect,k.m8.push(Z||"/"),u.abrupt("return");case 15:console.log(h),c(h),u.next=23;break;case 19:u.prev=19,u.t0=u.catch(0),F="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",N.ZP.error(F);case 23:case"end":return u.stop()}},i,null,[[0,19]])}));return function(o){return m.apply(this,arguments)}}(),g=f.status,B=f.type;console.log(L().content);var U="subbtn-show";return P==="qrcode"&&(U="subbtn-hide"),(0,e.jsx)("div",{className:L().container,children:(0,e.jsx)("div",{className:L().content,children:(0,e.jsxs)(Pe,{logo:(0,e.jsx)("img",{alt:"logo",src:"/u66.svg"}),title:"MetaWorks Platform",subTitle:"MetaWorksPlatform \u662F\u51CC\u4E91\u5149\u6700\u5177\u5F71\u54CD\u529B\u7684\u6570\u5B57\u4EBA\u5C55\u793A\u5E73\u53F0",initialValues:{autoLogin:!0},className:L()[U],onFinish:function(){var m=(0,w.Z)((0,y.Z)().mark(function i(o){return(0,y.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,A(o);case 2:case"end":return p.stop()}},i)}));return function(i){return m.apply(this,arguments)}}(),children:[(0,e.jsxs)(S.Z,{activeKey:P,onChange:I,children:[(0,e.jsx)(S.Z.TabPane,{tab:"\u5BC6\u7801\u767B\u5F55"},"account"),(0,e.jsx)(S.Z.TabPane,{tab:"\u77ED\u4FE1\u767B\u5F55"},"mobile"),(0,e.jsx)(S.Z.TabPane,{tab:"\u626B\u7801\u767B\u9646"},"qrcode")]}),g==="error"&&B==="account"&&(0,e.jsx)(oe,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801(admin/ant.design)"}),P==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(he.Z,{className:L().prefixIcon})},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7/\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7/\u624B\u673A\u53F7"}]}),(0,e.jsx)(J.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ne,{className:L().prefixIcon})},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"}]})]}),g==="error"&&B==="mobile"&&(0,e.jsx)(oe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),P==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J,{fieldProps:{size:"large",prefix:(0,e.jsx)(me,{className:L().prefixIcon})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,e.jsx)(Be,{fieldProps:{size:"large",prefix:(0,e.jsx)(ne,{className:L().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(i,o){return i?"".concat(o," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var m=(0,w.Z)((0,y.Z)().mark(function i(o){var h;return(0,y.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ke({phone:o});case 2:if(h=l.sent,h!==!1){l.next=5;break}return l.abrupt("return");case 5:N.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return l.stop()}},i)}));return function(i){return m.apply(this,arguments)}}()})]}),P==="qrcode"&&(0,e.jsxs)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"},children:[(0,e.jsx)("img",{src:"/qrcode.png",style:{width:"200px",height:"200px"}}),(0,e.jsx)("span",{children:"\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B\u767B\u9646"})]}),P==="account"&&(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(we,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801 ?"})]})]})})})},Ue=Ae},84305:function(V,R,r){"use strict";var W=r(33508),S=r.n(W)},97435:function(V,R){"use strict";function r(W,S){for(var K=Object.assign({},W),N=0;N<S.length;N+=1){var y=S[N];delete K[y]}return K}R.Z=r}}]);
