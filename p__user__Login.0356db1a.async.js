(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(w){w.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-","subbtn-hide":"subbtn-hide___1QDOa","subbtn-show":"subbtn-show___1UKpz",icon:"icon___rzGKO"}},32384:function(){},5482:function(w,K,n){"use strict";n.r(K),n.d(K,{default:function(){return ze}});var Ee=n(18106),k=n(63885),Re=n(34792),U=n(48086),F=n(90636),B=n(11849),z=n(3182),Y=n(57337),Ge=n(17462),se=n(76772),s=n(28991),d=n(67294),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ie=le,Q=n(27029),J=function(l,t){return d.createElement(Q.Z,(0,s.Z)((0,s.Z)({},l),{},{ref:t,icon:ie}))};J.displayName="LockOutlined";var X=d.forwardRef(J),oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},ue=oe,q=function(l,t){return d.createElement(Q.Z,(0,s.Z)((0,s.Z)({},l),{},{ref:t,icon:ue}))};q.displayName="MobileOutlined";var ce=d.forwardRef(q),de=n(89366),De=n(84305),ve=n(39559),V=n(81253),e=n(85893),fe=n(31490),me=n(5894),ke=n(32384),he=["logo","message","contentStyle","title","subTitle","actions","children"];function ge(r){var l,t=r.logo,y=r.message,g=r.contentStyle,S=r.title,P=r.subTitle,x=r.actions,I=r.children,c=(0,V.Z)(r,he),j=(0,fe.YB)(),R=c.submitter===!1?!1:(0,s.Z)((0,s.Z)({searchConfig:{submitText:j.getMessage("loginForm.submitText","\u767B\u5F55")}},c.submitter),{},{submitButtonProps:(0,s.Z)({size:"large",style:{width:"100%"}},(l=c.submitter)===null||l===void 0?void 0:l.submitButtonProps),render:function(v,i){var o,f=i.pop();if(typeof(c==null||(o=c.submitter)===null||o===void 0?void 0:o.render)=="function"){var m,a;return c==null||(m=c.submitter)===null||m===void 0||(a=m.render)===null||a===void 0?void 0:a.call(m,v,i)}return f}}),O=(0,d.useContext)(ve.ZP.ConfigContext),G=O.getPrefixCls("pro-form-login"),h=function(v){return"".concat(G,"-").concat(v)},M=(0,d.useMemo)(function(){return t?typeof t=="string"?(0,e.jsx)("img",{src:t}):t:null},[t]);return(0,e.jsxs)("div",{className:h("container"),children:[(0,e.jsxs)("div",{className:h("top"),children:[S||M?(0,e.jsxs)("div",{className:h("header"),children:[M?(0,e.jsx)("span",{className:h("logo"),children:M}):null,S?(0,e.jsx)("span",{className:h("title"),children:S}):null]}):null,P?(0,e.jsx)("div",{className:h("desc"),children:P}):null]}),(0,e.jsxs)("div",{className:h("main"),style:(0,s.Z)({width:328},g),children:[(0,e.jsxs)(me.A,(0,s.Z)((0,s.Z)({isKeyPressSubmit:!0},c),{},{submitter:R,children:[y,I]})),x?(0,e.jsx)("div",{className:h("other"),children:x}):null]})]})}var Ae=n(57663),pe=n(71577),Ue=n(47673),Ze=n(4107),A=n(55507),_=n(92137),$=n(28481),Ve=n(9715),xe=n(903),ee=n(64893),ye=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],je=d.forwardRef(function(r,l){var t=xe.Z.useFormInstance(),y=(0,d.useState)(r.countDown||60),g=(0,$.Z)(y,2),S=g[0],P=g[1],x=(0,d.useState)(!1),I=(0,$.Z)(x,2),c=I[0],j=I[1],R=(0,d.useState)(),O=(0,$.Z)(R,2),G=O[0],h=O[1],M=r.rules,D=r.name,v=r.phoneName,i=r.fieldProps,o=r.captchaTextRender,f=o===void 0?function(p,b){return p?"".concat(b," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:o,m=r.captchaProps,a=(0,V.Z)(r,ye),N=function(){var p=(0,_.Z)((0,A.Z)().mark(function b(L){return(0,A.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,h(!0),C.next=4,a.onGetCaptcha(L);case 4:h(!1),j(!0),C.next=13;break;case 8:C.prev=8,C.t0=C.catch(0),j(!1),h(!1),console.log(C.t0);case 13:case"end":return C.stop()}},b,null,[[0,8]])}));return function(L){return p.apply(this,arguments)}}();return(0,d.useImperativeHandle)(l,function(){return{startTiming:function(){return j(!0)},endTiming:function(){return j(!1)}}}),(0,d.useEffect)(function(){var p=0,b=r.countDown;return c&&(p=window.setInterval(function(){P(function(L){return L<=1?(j(!1),clearInterval(p),b||60):L-1})},1e3)),function(){return clearInterval(p)}},[c]),(0,e.jsxs)("div",{style:(0,s.Z)((0,s.Z)({},i==null?void 0:i.style),{},{display:"flex",alignItems:"center"}),ref:l,children:[(0,e.jsx)(Ze.Z,(0,s.Z)((0,s.Z)({},i),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,e.jsx)(pe.Z,(0,s.Z)((0,s.Z)({style:{display:"block"},disabled:c,loading:G},m),{},{onClick:function(){var p=(0,_.Z)((0,A.Z)().mark(function L(){var u;return(0,A.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(Z.prev=0,!v){Z.next=9;break}return Z.next=4,t.validateFields([v].flat(1));case 4:return u=t.getFieldValue([v].flat(1)),Z.next=7,N(u);case 7:Z.next=11;break;case 9:return Z.next=11,N("");case 11:Z.next=16;break;case 13:Z.prev=13,Z.t0=Z.catch(0),console.log(Z.t0);case 16:case"end":return Z.stop()}},L,null,[[0,13]])}));function b(){return p.apply(this,arguments)}return b}(),children:f(c,S)}))]})}),Pe=(0,ee.G)(je),be=Pe,$e=n(63185),Ce=n(9676),ne=n(22270),re=n(7681),Fe=["options","fieldProps","proFieldProps","valueEnum"],Se=d.forwardRef(function(r,l){var t=r.options,y=r.fieldProps,g=r.proFieldProps,S=r.valueEnum,P=(0,V.Z)(r,Fe);return(0,e.jsx)(re.Z,(0,s.Z)({ref:l,valueType:"checkbox",valueEnum:(0,ne.h)(S,void 0),fieldProps:(0,s.Z)({options:t},y),lightProps:(0,s.Z)({labelFormatter:function(){return(0,e.jsx)(re.Z,(0,s.Z)({ref:l,valueType:"checkbox",mode:"read",valueEnum:(0,ne.h)(S,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:t},y),proFieldProps:g},P))}},P.lightProps),proFieldProps:g},P))}),Te=d.forwardRef(function(r,l){var t=r.fieldProps,y=r.children;return(0,e.jsx)(Ce.Z,(0,s.Z)((0,s.Z)({ref:l},t),{},{children:y}))}),Le=(0,ee.G)(Te,{valuePropName:"checked"}),te=Le;te.Group=Se;var Me=te,H=n(5966),E=n(81910),Ne=n(36571);function Be(r,l){return W.apply(this,arguments)}function W(){return W=(0,z.Z)((0,F.Z)().mark(function r(l,t){return(0,F.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.WY)("/api/login/captcha",(0,B.Z)({method:"GET",params:(0,B.Z)({},l)},t||{})));case 1:case"end":return g.stop()}},r)})),W.apply(this,arguments)}var Ie=n(34687),T=n.n(Ie),ae=function(l){var t=l.content;return(0,e.jsx)(se.Z,{style:{marginBottom:24},message:t,type:"error",showIcon:!0})},Oe=function(){var l=(0,d.useState)({}),t=(0,Y.Z)(l,2),y=t[0],g=t[1],S=(0,d.useState)("account"),P=(0,Y.Z)(S,2),x=P[0],I=P[1],c=(0,E.tT)("@@initialState"),j=c.initialState,R=c.setInitialState,O=function(){var v=(0,z.Z)((0,F.Z)().mark(function i(){var o,f;return(0,F.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j==null||(o=j.fetchUserInfo)===null||o===void 0?void 0:o.call(j);case 2:if(f=a.sent,!f){a.next=6;break}return a.next=6,R(function(N){return(0,B.Z)((0,B.Z)({},N),{},{currentUser:f})});case 6:case"end":return a.stop()}},i)}));return function(){return v.apply(this,arguments)}}(),G=function(){var v=(0,z.Z)((0,F.Z)().mark(function i(o){var f,m,a,N,p,b;return(0,F.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,Ne.x4)((0,B.Z)((0,B.Z)({},o),{},{type:x}));case 3:if(f=u.sent,f.status!=="ok"){u.next=15;break}return m="\u767B\u5F55\u6210\u529F\uFF01",U.ZP.success(m),u.next=9,O();case 9:if(E.m8){u.next=11;break}return u.abrupt("return");case 11:return a=E.m8.location.query,N=a,p=N.redirect,E.m8.push(p||"/"),u.abrupt("return");case 15:console.log(f),g(f),u.next=23;break;case 19:u.prev=19,u.t0=u.catch(0),b="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",U.ZP.error(b);case 23:case"end":return u.stop()}},i,null,[[0,19]])}));return function(o){return v.apply(this,arguments)}}(),h=y.status,M=y.type;console.log(T().content);var D="subbtn-show";return x==="qrcode"&&(D="subbtn-hide"),(0,e.jsx)("div",{className:T().container,children:(0,e.jsx)("div",{className:T().content,children:(0,e.jsxs)(ge,{logo:(0,e.jsx)("img",{alt:"logo",src:"/u66.svg"}),title:"MetaWorks Platform",subTitle:"MetaWorksPlatform \u662F\u51CC\u4E91\u5149\u6700\u5177\u5F71\u54CD\u529B\u7684\u6570\u5B57\u4EBA\u5C55\u793A\u5E73\u53F0",initialValues:{autoLogin:!0},className:T()[D],onFinish:function(){var v=(0,z.Z)((0,F.Z)().mark(function i(o){return(0,F.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,G(o);case 2:case"end":return m.stop()}},i)}));return function(i){return v.apply(this,arguments)}}(),children:[(0,e.jsxs)(k.Z,{activeKey:x,onChange:I,children:[(0,e.jsx)(k.Z.TabPane,{tab:"\u5BC6\u7801\u767B\u5F55"},"account"),(0,e.jsx)(k.Z.TabPane,{tab:"\u77ED\u4FE1\u767B\u5F55"},"mobile"),(0,e.jsx)(k.Z.TabPane,{tab:"\u626B\u7801\u767B\u9646"},"qrcode")]}),h==="error"&&M==="account"&&(0,e.jsx)(ae,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801(admin/ant.design)"}),x==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(de.Z,{className:T().prefixIcon})},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7/\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7/\u624B\u673A\u53F7"}]}),(0,e.jsx)(H.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(X,{className:T().prefixIcon})},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"}]})]}),h==="error"&&M==="mobile"&&(0,e.jsx)(ae,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),x==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ce,{className:T().prefixIcon})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,e.jsx)(be,{fieldProps:{size:"large",prefix:(0,e.jsx)(X,{className:T().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(i,o){return i?"".concat(o," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var v=(0,z.Z)((0,F.Z)().mark(function i(o){var f;return(0,F.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Be({phone:o});case 2:if(f=a.sent,f!==!1){a.next=5;break}return a.abrupt("return");case 5:U.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return a.stop()}},i)}));return function(i){return v.apply(this,arguments)}}()})]}),x==="qrcode"&&(0,e.jsxs)("div",{style:{display:"flex","flex-direction":"column","align-items":"center"},children:[(0,e.jsx)("img",{src:"/qrcode.png",style:{width:"200px",height:"200px"}}),(0,e.jsx)("span",{children:"\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B\u767B\u9646"})]}),x==="account"&&(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(Me,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801 ?"})]})]})})})},ze=Oe}}]);
